# NEXT STEPS: SDK V2 Implementation

**–î–∞—Ç–∞**: 2025-12-28
**–°—Ç–∞—Ç—É—Å**: Ready for implementation
**–ü–ª–∞–Ω**: `reports/SDK-PLAN-V2-OFFICIAL-APPROACH.md`

---

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

1. –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π SDK —Å–∏—Å—Ç–µ–º—ã
2. –ò–∑—É—á–µ–Ω–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Claude Agent SDK (sessions, subagents, hooks)
3. –í—ã—è–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
4. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø–ª–∞–Ω V2 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ SDK –ø–æ–¥—Ö–æ–¥–∞

---

## –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |
|----------|------------------|
| Builder —á–∏—Ç–∞–µ—Ç –≤–µ—Å—å workflow (217K) | –ù–µ –≤–ª–µ–∑–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç |
| SOFT_PASS –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—à–∏–±–∫–∏ | –ë–∞–≥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–∞–∫ "–≥–æ—Ç–æ–≤–æ" |
| –ù–µ—Ç rollback | –°–ª–æ–º–∞–ª–∏ - –æ—Ç–∫–∞—Ç–∏—Ç—å –Ω–µ–ª—å–∑—è |
| –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ | Architect –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –ó–ê–ß–ï–ú |
| –í—Å–µ —Ñ–∏–∫—Å—ã —Å—Ä–∞–∑—É | –ê–≥–µ–Ω—Ç—ã –ø—É—Ç–∞—é—Ç—Å—è |
| –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ | QA –≥–æ–≤–æ—Ä–∏—Ç –û–ö, –≤ Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |

---

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –ß–∏—Ç–∞–π –ø–ª–∞–Ω: `reports/SDK-PLAN-V2-OFFICIAL-APPROACH.md`

### –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

```
WEEK 1: –û—Å–Ω–æ–≤–∞
‚îú‚îÄ‚îÄ 1. src/sdk-config.ts         # Agents + Hooks + MCP
‚îú‚îÄ‚îÄ 2. src/lib/snapshot.ts       # Snapshot/Rollback
‚îú‚îÄ‚îÄ 3. src/lib/external-test.ts  # Telegram —Ç–µ—Å—Ç —Å retry
‚îú‚îÄ‚îÄ 4. src/lib/todo.ts           # TODO manager —Å Zod
‚îî‚îÄ‚îÄ 5. src/lib/node-isolation.ts # –ß–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –Ω–æ–¥—ã

WEEK 2: Flows
‚îú‚îÄ‚îÄ 6. src/analyze-flow.ts       # npm run analyze
‚îú‚îÄ‚îÄ 7. src/fix-flow.ts           # npm run fix
‚îî‚îÄ‚îÄ 8. src/index.ts              # Entry point

WEEK 3: –ú–∏–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ 9. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ 10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ 11. –û–±–Ω–æ–≤–∏—Ç—å README
```

---

## –ù–∞—á–Ω–∏ —Å sdk-config.ts

–≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª. –ö–æ–¥ —É–∂–µ –≥–æ—Ç–æ–≤ –≤ –ø–ª–∞–Ω–µ, –Ω—É–∂–Ω–æ:

1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/sdk-config.ts`
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏–∑ –ø–ª–∞–Ω–∞ (—Å–µ–∫—Ü–∏—è "–ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª: sdk-config.ts")
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è

```bash
npm run typecheck
```

---

## –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ù–µ —Ç—Ä–æ–≥–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ø–æ–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤ –Ω–æ–≤—ã–π** - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å
2. **–î–µ–ª–∞–π –ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É** - –ª–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
3. **–¢–µ—Å—Ç–∏—Ä—É–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞** - `npm run typecheck`
4. **Zod –¥–ª—è TODO.json** - LLM –º–æ–∂–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
5. **Retry –≤ external-test** - exponential backoff –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

---

## ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –µ—Å—Ç—å)

```bash
# Required
N8N_API_URL=...
N8N_API_KEY=...
ANTHROPIC_API_KEY=...

# Optional
EXTERNAL_TEST_ENABLED=true
EXTERNAL_TEST_WEBHOOK_URL=https://n8n.srv1068954.hstgr.cloud/webhook/bot-test
SUPABASE_ENABLED=false
```

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ

1. –ß–∏—Ç–∞–π –ø–ª–∞–Ω: `reports/SDK-PLAN-V2-OFFICIAL-APPROACH.md`
2. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://platform.claude.com/docs/en/api/agent-sdk/overview
3. SDK Demos: https://github.com/anthropics/claude-agent-sdk-demos

---

## Quick start

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run typecheck
npm test

# 2. –°–æ–∑–¥–∞–π –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª
# –û—Ç–∫—Ä–æ–π reports/SDK-PLAN-V2-OFFICIAL-APPROACH.md
# –°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥ sdk-config.ts
# –°–æ–∑–¥–∞–π src/sdk-config.ts

# 3. –ü—Ä–æ–≤–µ—Ä—å
npm run typecheck
```

---

**GO! üöÄ**
